<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="deployKF effortlessly integrates Kubeflow and leading MLOps tools on Kubernetes, compose your open ML platform today!"><link href=https://www.deploykf.org/guides/platform/deploykf-gateway/ rel=canonical><link href=../deploykf-profiles/ rel=prev><link href=../deploykf-dashboard/ rel=next><link rel=icon href=../../../favicon_1.ico><meta name=generator content="mkdocs-1.5.2, mkdocs-material-9.2.3"><title>Expose deployKF Gateway and configure HTTPS - deployKF</title><link rel=stylesheet href=../../../assets/stylesheets/main.0e669242.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.85d0ee34.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../css/timeago.css><link rel=stylesheet href=../../../assets/stylesheets/admonitions.min.css><link rel=stylesheet href=../../../assets/stylesheets/banner.min.css><link rel=stylesheet href=../../../assets/stylesheets/color.min.css><link rel=stylesheet href=../../../assets/stylesheets/tables.min.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-SN033DKN82"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-SN033DKN82",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-SN033DKN82",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><meta property=og:type content=website><meta property=og:title content="Expose deployKF Gateway and configure HTTPS - deployKF"><meta property=og:description content="deployKF effortlessly integrates Kubeflow and leading MLOps tools on Kubernetes, compose your open ML platform today!"><meta property=og:image content=https://www.deploykf.org/assets/images/social/guides/platform/deploykf-gateway.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><meta content=https://www.deploykf.org/guides/platform/deploykf-gateway/ property=og:url><meta name=twitter:card content=summary_large_image><meta name=twitter:title content="Expose deployKF Gateway and configure HTTPS - deployKF"><meta name=twitter:description content="deployKF effortlessly integrates Kubeflow and leading MLOps tools on Kubernetes, compose your open ML platform today!"><meta name=twitter:image content=https://www.deploykf.org/assets/images/social/guides/platform/deploykf-gateway.png><script type=application/ld+json>{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Guides", "item": "https://www.deploykf.org/guides"}, {"@type": "ListItem", "position": 2, "name": "Platform", "item": "https://www.deploykf.org/guides/platform"}, {"@type": "ListItem", "position": 3, "name": "Expose deployKF Gateway and configure HTTPS"}]}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=deploykf-primary data-md-color-accent=deploykf-accent> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#expose-deploykf-gateway-and-configure-https class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <button class="md-banner__button md-icon" aria-label="Don't show this again"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> <h3> <b>ANNOUNCEMENT:</b> <a href=https://github.com/deployKF/deployKF/releases/tag/v0.1.1> We are pleased to announce that <strong>deployKF v0.1.1</strong> is now available! ðŸš€ </a> </h3> </div> <script>var content,el=document.querySelector("[data-md-component=announce]");el&&(content=el.querySelector(".md-typeset"),__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0))</script> </aside> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title=deployKF class="md-header__button md-logo" aria-label=deployKF data-md-component=logo> <img src=../../../assets/images/logo_1/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> deployKF </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Expose deployKF Gateway and configure HTTPS </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=deploykf-primary data-md-color-accent=deploykf-accent aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=deploykf-primary data-md-color-accent=deploykf-accent aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/deployKF/deployKF title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../about/community/ class=md-tabs__link> About </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../getting-started/ class=md-tabs__link> Admin Guides </a> </li> <li class=md-tabs__item> <a href=../../../user-guides/access-kubeflow-pipelines-api/ class=md-tabs__link> User Guides </a> </li> <li class=md-tabs__item> <a href=../../../releases/version-matrix/ class=md-tabs__link> Releases </a> </li> <li class=md-tabs__item> <a href=../../../reference/deploykf-values/ class=md-tabs__link> Reference </a> </li> <li class=md-tabs__item> <a href=../../../faq/ class=md-tabs__link> FAQ </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=deployKF class="md-nav__button md-logo" aria-label=deployKF data-md-component=logo> <img src=../../../assets/images/logo_1/logo.svg alt=logo> </a> deployKF </label> <div class=md-nav__source> <a href=https://github.com/deployKF/deployKF title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> About </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../about/community/ class=md-nav__link> <span class=md-ellipsis> Community </span> </a> </li> <li class=md-nav__item> <a href=../../../about/support/ class=md-nav__link> <span class=md-ellipsis> Get Support </span> </a> </li> <li class=md-nav__item> <a href=../../../about/architecture/ class=md-nav__link> <span class=md-ellipsis> Architecture of deployKF </span> </a> </li> <li class=md-nav__item> <a href=../../../about/kubeflow-vs-deploykf/ class=md-nav__link> <span class=md-ellipsis> Kubeflow vs deployKF </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Admin Guides </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Admin Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3 checked> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class=md-ellipsis> Configurations (Platform) </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Configurations (Platform) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../deploykf-authentication/ class=md-nav__link> <span class=md-ellipsis> User Authentication and External Identity Providers </span> </a> </li> <li class=md-nav__item> <a href=../deploykf-profiles/ class=md-nav__link> <span class=md-ellipsis> Manage Profiles and Assigning Users </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Expose deployKF Gateway and configure HTTPS </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Expose deployKF Gateway and configure HTTPS </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=#1-expose-the-gateway-service class=md-nav__link> 1. Expose the Gateway Service </a> <nav class=md-nav aria-label="1. Expose the Gateway Service"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#expose-with-loadbalancer-service class=md-nav__link> Expose with LoadBalancer Service </a> </li> <li class=md-nav__item> <a href=#expose-with-ingress class=md-nav__link> Expose with Ingress </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-configure-dns class=md-nav__link> 2. Configure DNS </a> <nav class=md-nav aria-label="2. Configure DNS"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configure-records-with-external-dns class=md-nav__link> Configure records with External-DNS </a> </li> <li class=md-nav__item> <a href=#configure-records-manually class=md-nav__link> Configure records manually </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-configure-httpstls class=md-nav__link> 3. Configure HTTPS/TLS </a> <nav class=md-nav aria-label="3. Configure HTTPS/TLS"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configure-tls-for-istio-gateway class=md-nav__link> Configure TLS for Istio Gateway </a> <nav class=md-nav aria-label="Configure TLS for Istio Gateway"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-connect-cert-manager-to-dns-provider class=md-nav__link> STEP 1: Connect cert-manager to DNS Provider </a> </li> <li class=md-nav__item> <a href=#step-2-create-a-clusterissuer class=md-nav__link> STEP 2: Create a ClusterIssuer </a> </li> <li class=md-nav__item> <a href=#step-3-configure-the-istio-gateway class=md-nav__link> STEP 3: Configure the Istio Gateway </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configure-tls-for-ingress class=md-nav__link> Configure TLS for Ingress </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../deploykf-dashboard/ class=md-nav__link> <span class=md-ellipsis> Customize the deployKF Dashboard </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class=md-ellipsis> Configurations (Tools) </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Configurations (Tools) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tools/external-mysql/ class=md-nav__link> <span class=md-ellipsis> Connect an external MySQL Database </span> </a> </li> <li class=md-nav__item> <a href=../../tools/external-object-store/ class=md-nav__link> <span class=md-ellipsis> Connect an external S3-like Object Store </span> </a> </li> <li class=md-nav__item> <a href=../../tools/kubeflow-notebooks/ class=md-nav__link> <span class=md-ellipsis> Configure Kubeflow Notebooks </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5 id=__nav_3_5_label tabindex=0> <span class=md-ellipsis> Other </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Other </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../deploykf-cli/ class=md-nav__link> <span class=md-ellipsis> Install deployKF CLI </span> </a> </li> <li class=md-nav__item> <a href=../../migrate-from-kubeflow-manifests/ class=md-nav__link> <span class=md-ellipsis> Migrate from Kubeflow Manifests </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> User Guides </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> User Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1 id=__nav_4_1_label tabindex=0> <span class=md-ellipsis> Kubeflow Pipelines </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> Kubeflow Pipelines </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../user-guides/access-kubeflow-pipelines-api/ class=md-nav__link> <span class=md-ellipsis> Access Kubeflow Pipelines API </span> </a> </li> <li class=md-nav__item> <a href=../../../user-guides/gitops-for-kubeflow-pipelines/ class=md-nav__link> <span class=md-ellipsis> GitOps for Kubeflow Pipelines </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Releases </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Releases </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../releases/version-matrix/ class=md-nav__link> <span class=md-ellipsis> Version Matrix </span> </a> </li> <li class=md-nav__item> <a href=../../../releases/changelog-deploykf/ class=md-nav__link> <span class=md-ellipsis> Changelog for deployKF </span> </a> </li> <li class=md-nav__item> <a href=../../../releases/changelog-deploykf-cli/ class=md-nav__link> <span class=md-ellipsis> Changelog for deployKF CLI </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/deploykf-values/ class=md-nav__link> <span class=md-ellipsis> Generator Values (Configs) </span> </a> </li> <li class=md-nav__item> <a href=../../../reference/tools/ class=md-nav__link> <span class=md-ellipsis> Supported Tools </span> </a> </li> <li class=md-nav__item> <a href=../../../reference/future-tools/ class=md-nav__link> <span class=md-ellipsis> Future Tools </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../faq/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=#1-expose-the-gateway-service class=md-nav__link> 1. Expose the Gateway Service </a> <nav class=md-nav aria-label="1. Expose the Gateway Service"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#expose-with-loadbalancer-service class=md-nav__link> Expose with LoadBalancer Service </a> </li> <li class=md-nav__item> <a href=#expose-with-ingress class=md-nav__link> Expose with Ingress </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-configure-dns class=md-nav__link> 2. Configure DNS </a> <nav class=md-nav aria-label="2. Configure DNS"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configure-records-with-external-dns class=md-nav__link> Configure records with External-DNS </a> </li> <li class=md-nav__item> <a href=#configure-records-manually class=md-nav__link> Configure records manually </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-configure-httpstls class=md-nav__link> 3. Configure HTTPS/TLS </a> <nav class=md-nav aria-label="3. Configure HTTPS/TLS"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configure-tls-for-istio-gateway class=md-nav__link> Configure TLS for Istio Gateway </a> <nav class=md-nav aria-label="Configure TLS for Istio Gateway"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-connect-cert-manager-to-dns-provider class=md-nav__link> STEP 1: Connect cert-manager to DNS Provider </a> </li> <li class=md-nav__item> <a href=#step-2-create-a-clusterissuer class=md-nav__link> STEP 2: Create a ClusterIssuer </a> </li> <li class=md-nav__item> <a href=#step-3-configure-the-istio-gateway class=md-nav__link> STEP 3: Configure the Istio Gateway </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configure-tls-for-ingress class=md-nav__link> Configure TLS for Ingress </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/deployKF/website/edit/main/content/guides/platform/deploykf-gateway.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg> </a> <a href=https://github.com/deployKF/website/raw/main/content/guides/platform/deploykf-gateway.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg> </a> <h1 id=expose-deploykf-gateway-and-configure-https>Expose deployKF Gateway and configure HTTPS<a class=headerlink href=#expose-deploykf-gateway-and-configure-https title="Permanent link">&para;</a></h1> <p>This guide explains how to expose the deployKF Gateway Service and configure HTTPS.</p> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>The "deployKF Gateway Service" is the main network entry point to deployKF. By default, it is a <a href=https://kubernetes.io/docs/concepts/services-networking/service/ rel=noopener target=_blank>Kubernetes Service</a> named <code>deploykf-gateway</code> pointing to our <a href=https://istio.io/latest/docs/tasks/traffic-management/ingress/ingress-control/ rel=noopener target=_blank>Istio Ingress Gateway</a> pods.</p> <div class="admonition contribute"> <p class=admonition-title>Help Improve this Guide</p> <p>This guide covers an incredibly broad topic with near limitless possible implementations. As a result, it is likely to be missing some important details for your specific use case. If you see anything that is incorrect or missing, please help us by <a href="https://github.com/deployKF/website/issues/new/?title=[Feedback]+Expose deployKF Gateway and configure HTTPS" rel=noopener target=_blank>raising an issue</a>!</p> </div> <h2 id=1-expose-the-gateway-service>1. Expose the Gateway Service<a class=headerlink href=#1-expose-the-gateway-service title="Permanent link">&para;</a></h2> <p>The first step is to expose the deployKF Gateway Service on an IP address that is accessible from outside the cluster.</p> <p>There are two main options to expose the deployKF Gateway Service:</p> <ol> <li>Use a <a href=https://kubernetes.io/docs/concepts/services-networking/service/#loadbalancer rel=noopener target=_blank><code>LoadBalancer</code></a> type Service (recommended)</li> <li>Configure an <a href=https://kubernetes.io/docs/concepts/services-networking/ingress/#terminology rel=noopener target=_blank><code>Ingress</code></a></li> </ol> <div class="admonition danger"> <p class=admonition-title>Public Internet</p> <p>You should seriously consider the security implications of exposing the deployKF Gateway to the public internet. Given the nature of ML Platforms, most companies choose to expose the gateway on their private network, and then use a VPN or other secure connection to access it.</p> </div> <div class="admonition info"> <p class=admonition-title>Include custom manifests in generated output</p> <p>deployKF provides an <code>extraManifests</code> value for each component which allows arbitrary YAML manifests to be added to the generated output. For example, <a href=https://github.com/deployKF/deployKF/blob/v0.1.1/generator/default_values.yaml#L575-L579 rel=noopener target=_blank><code>deploykf_core.deploykf_istio_gateway.extraManifests</code></a> may be used to add a custom Ingress or Secret resource to the generated output of the <code>deploykf-istio-gateway</code> component.</p> </div> <h3 id=expose-with-loadbalancer-service>Expose with LoadBalancer Service<a class=headerlink href=#expose-with-loadbalancer-service title="Permanent link">&para;</a></h3> <details class=steps> <summary>Steps to Expose with LoadBalancer Service</summary> <p>Most Kubernetes platforms provide a LoadBalancer service that can expose on a public/private IP address.</p> <p>To use this option, you will generally need to do the following:</p> <ol> <li>Set the <a href=https://github.com/deployKF/deployKF/blob/v0.1.1/generator/default_values.yaml#L653 rel=noopener target=_blank><code>deploykf_core.deploykf_istio_gateway.gatewayService.type</code></a> value to <code>"LoadBalancer"</code> (the default)</li> <li>Use the <a href=https://github.com/deployKF/deployKF/blob/v0.1.1/generator/default_values.yaml#L654C7-L654C18 rel=noopener target=_blank><code>deploykf_core.deploykf_istio_gateway.gatewayService.annotations</code></a> value to configure the Service</li> </ol> <hr> <details class=config> <summary>Amazon Web Services (EKS)</summary> <p>The <a href=https://kubernetes-sigs.github.io/aws-load-balancer-controller/ rel=noopener target=_blank>AWS Load Balancer Controller</a> is commonly used to configure LoadBalancer services on EKS.</p> <p>For example, you might set the following values to use a <a href=https://docs.aws.amazon.com/elasticloadbalancing/latest/network/introduction.html rel=noopener target=_blank>Network Load Balancer (NLB)</a>:</p> <div class=highlight><pre><span></span><code><span class=nt>deploykf_core</span><span class=p>:</span>
<span class=w>  </span><span class=nt>deploykf_istio_gateway</span><span class=p>:</span>

<span class=w>    </span><span class=c1>## these values are used to configure the deployKF Gateway Service</span>
<span class=w>    </span><span class=c1>##</span>
<span class=w>    </span><span class=nt>gatewayService</span><span class=p>:</span>
<span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;deploykf-gateway&quot;</span>
<span class=w>      </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=s>&quot;LoadBalancer&quot;</span>
<span class=w>      </span><span class=nt>annotations</span><span class=p>:</span>
<span class=w>        </span><span class=nt>service.beta.kubernetes.io/aws-load-balancer-type</span><span class=p>:</span><span class=w> </span><span class=s>&quot;external&quot;</span>
<span class=w>        </span><span class=nt>service.beta.kubernetes.io/aws-load-balancer-nlb-target-type</span><span class=p>:</span><span class=w> </span><span class=s>&quot;ip&quot;</span>
<span class=w>        </span><span class=nt>service.beta.kubernetes.io/aws-load-balancer-scheme</span><span class=p>:</span><span class=w> </span><span class=s>&quot;internal&quot;</span>

<span class=w>        </span><span class=c1>## for external-dns integration (if not `--source=istio-gateway` config)</span>
<span class=w>        </span><span class=c1>#external-dns.alpha.kubernetes.io/hostname: &quot;deploykf.example.com, *.deploykf.example.com&quot;</span>

<span class=w>        </span><span class=c1>## for static private IP addresses</span>
<span class=w>        </span><span class=c1>#service.beta.kubernetes.io/aws-load-balancer-private-ipv4-addresses: &quot;192.168.XXX.XXX, 192.168.YYY.YYY&quot;</span>
<span class=w>        </span><span class=c1>#service.beta.kubernetes.io/aws-load-balancer-subnets: &quot;subnet-XXX, subnet-YYY&quot;</span>

<span class=w>        </span><span class=c1>## for static public IP addresses</span>
<span class=w>        </span><span class=c1>#service.beta.kubernetes.io/aws-load-balancer-eip-allocations: &quot;eipalloc-XXX, eipalloc-YYY&quot;</span>
<span class=w>        </span><span class=c1>#service.beta.kubernetes.io/aws-load-balancer-subnets: &quot;subnet-XXX, subnet-YYY&quot;</span>
</code></pre></div> </details> <details class=config> <summary>Google Cloud (GKE)</summary> <p>GKE, has a LoadBalancer Service type, which is configured with annotations like <a href=https://cloud.google.com/kubernetes-engine/docs/concepts/service-load-balancer-parameters rel=noopener target=_blank><code>networking.gke.io/load-balancer-type</code></a>. </p> <p>For example, you might set the following values to use an <a href=https://cloud.google.com/kubernetes-engine/docs/concepts/service-load-balancer rel=noopener target=_blank>INTERNAL Passthrough Network Load Balancer</a>:</p> <div class=highlight><pre><span></span><code><span class=nt>deploykf_core</span><span class=p>:</span>
<span class=w>  </span><span class=nt>deploykf_istio_gateway</span><span class=p>:</span>

<span class=w>    </span><span class=c1>## these values are used to configure the deployKF Gateway Service</span>
<span class=w>    </span><span class=c1>##</span>
<span class=w>    </span><span class=nt>gatewayService</span><span class=p>:</span>
<span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;deploykf-gateway&quot;</span>
<span class=w>      </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=s>&quot;LoadBalancer&quot;</span>
<span class=w>      </span><span class=nt>annotations</span><span class=p>:</span>
<span class=w>        </span><span class=nt>networking.gke.io/load-balancer-type</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Internal&quot;</span>

<span class=w>        </span><span class=c1>## for external-dns integration (if not `--source=istio-gateway` config)</span>
<span class=w>        </span><span class=c1>#external-dns.alpha.kubernetes.io/hostname: &quot;deploykf.example.com, *.deploykf.example.com&quot;</span>

<span class=w>      </span><span class=c1>## for static IP addresses</span>
<span class=w>      </span><span class=c1>#loadBalancerIP: &quot;192.168.XXX.XXX&quot;</span>
<span class=w>      </span><span class=c1>#loadBalancerSourceRanges: [&quot;192.168.XXX.XXX/32&quot;]</span>
</code></pre></div> </details> </details> <h3 id=expose-with-ingress>Expose with Ingress<a class=headerlink href=#expose-with-ingress title="Permanent link">&para;</a></h3> <details class=steps> <summary>Steps to Expose with Ingress</summary> <p>Most Kubernetes platforms provide an Ingress class that can expose on a public/private IP address.</p> <p>To use this option, you will generally need to do the following:</p> <ol> <li>Set the <a href=https://github.com/deployKF/deployKF/blob/v0.1.1/generator/default_values.yaml#L653 rel=noopener target=_blank><code>deploykf_core.deploykf_istio_gateway.gatewayService.type</code></a> value to <code>"NodePort"</code> or <code>"ClusterIP"</code></li> <li>Use the <a href=https://github.com/deployKF/deployKF/blob/v0.1.1/generator/default_values.yaml#L654C7-L654C18 rel=noopener target=_blank><code>deploykf_core.deploykf_istio_gateway.gatewayService.annotations</code></a> value to configure the Service</li> <li>Create an <code>Ingress</code> resource that points to the <code>deploykf-gateway</code> Service</li> </ol> <hr> <details class=config> <summary>Amazon Web Services (EKS)</summary> <p>The <a href=https://kubernetes-sigs.github.io/aws-load-balancer-controller/ rel=noopener target=_blank>AWS Load Balancer Controller</a> is commonly used to configure Ingress resources on EKS.</p> <div class="admonition warning"> <p class=admonition-title>TLS Certificates</p> <p>Because ALB does NOT support TLS-passthrough, you must manually create an <a href=https://aws.amazon.com/certificate-manager/ rel=noopener target=_blank>AWS Certificate Manager (ACM)</a> wildcard certificate for your domain. The <code>alb.ingress.kubernetes.io/certificate-arn</code> Ingress annotation will be used to select the certificate and allow the Ingress to terminate TLS before forwarding to the Gateway Service.</p> <table> <thead> <tr> <th>Hostname</th> <th>Certificate Field</th> </tr> </thead> <tbody> <tr> <td><code>*.deploykf.example.com</code></td> <td>CN, SAN</td> </tr> <tr> <td><code>deploykf.example.com</code></td> <td>SAN</td> </tr> </tbody> </table> </div> <p>For example, you might set the following values to use an <a href=https://docs.aws.amazon.com/elasticloadbalancing/latest/application/introduction.html rel=noopener target=_blank>Application Load Balancer (ALB)</a>:</p> <div class=highlight><pre><span></span><code><span class=nt>deploykf_core</span><span class=p>:</span>
<span class=w>  </span><span class=nt>deploykf_istio_gateway</span><span class=p>:</span>

<span class=w>    </span><span class=c1>## this value is used to add arbitrary manifests to the generated output</span>
<span class=w>    </span><span class=c1>##</span>
<span class=w>    </span><span class=nt>extraManifests</span><span class=p>:</span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="p p-Indicator">|</span>
<span class=w>        </span><span class=no>apiVersion: extensions/v1beta1</span>
<span class=w>        </span><span class=no>kind: Ingress</span>
<span class=w>        </span><span class=no>metadata:</span>
<span class=w>          </span><span class=no>name: deploykf-gateway</span>
<span class=w>          </span><span class=no>annotations:</span>
<span class=w>            </span><span class=no>alb.ingress.kubernetes.io/scheme: internal</span>
<span class=w>            </span><span class=no>alb.ingress.kubernetes.io/target-type: ip</span>
<span class=w>            </span><span class=no>alb.ingress.kubernetes.io/listen-ports: &#39;[{&quot;HTTP&quot;: 80}, {&quot;HTTPS&quot;: 443}]&#39;</span>
<span class=w>            </span><span class=no>alb.ingress.kubernetes.io/ssl-redirect: &#39;443&#39;</span>
<span class=w>            </span><span class=no>alb.ingress.kubernetes.io/certificate-arn: &quot;arn:aws:acm:REGION_NAME:ACCOUNT_ID:certificate/CERTIFICATE_ID&quot;</span>
<span class=w>            </span><span class=no>alb.ingress.kubernetes.io/backend-protocol: HTTPS</span>
<span class=w>        </span><span class=no>spec:</span>
<span class=w>          </span><span class=no>ingressClassName: alb                  </span>
<span class=w>          </span><span class=no>rules:</span>
<span class=w>            </span><span class=no>- host: &quot;deploykf.example.com&quot;</span>
<span class=w>              </span><span class=no>http:</span>
<span class=w>                </span><span class=no>paths:</span>
<span class=w>                  </span><span class=no>- path: &quot;/*&quot;</span>
<span class=w>                    </span><span class=no>backend:</span>
<span class=w>                      </span><span class=no>service:</span>
<span class=w>                        </span><span class=no>name: &quot;deploykf-gateway&quot;</span>
<span class=w>                        </span><span class=no>port:</span>
<span class=w>                          </span><span class=no>name: https</span>
<span class=w>            </span><span class=no>- host: &quot;*.deploykf.example.com&quot;</span>
<span class=w>              </span><span class=no>http:</span>
<span class=w>                </span><span class=no>paths:</span>
<span class=w>                  </span><span class=no>- path: &quot;/*&quot;</span>
<span class=w>                    </span><span class=no>backend:</span>
<span class=w>                      </span><span class=no>service:</span>
<span class=w>                        </span><span class=no>name: &quot;deploykf-gateway&quot;</span>
<span class=w>                        </span><span class=no>port:</span>
<span class=w>                          </span><span class=no>name: https</span>

<span class=w>    </span><span class=c1>## these values are used to configure the deployKF Gateway Service</span>
<span class=w>    </span><span class=c1>##</span>
<span class=w>    </span><span class=nt>gatewayService</span><span class=p>:</span>
<span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;deploykf-gateway&quot;</span>
<span class=w>      </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=s>&quot;NodePort&quot;</span>
<span class=w>      </span><span class=nt>annotations</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{}</span>
</code></pre></div> </details> <details class=config> <summary>Google Cloud (GKE)</summary> <p>GKE, has an Ingress class that can be used to configure Ingress resources for external or internal access. </p> <div class="admonition warning"> <p class=admonition-title>TLS Certificates</p> <p>In the following example, we are configuring the GKE Ingress to use the same TLS certificate as the deployKF Gateway Service (found in <code>Secret/deploykf-istio-gateway-cert</code>). Later in this guide you will learn how to make this certificate valid, and not self-signed.</p> </div> <p>For example, you might set the following values to use an <a href=https://cloud.google.com/kubernetes-engine/docs/concepts/ingress rel=noopener target=_blank>INTERNAL Application Load Balancer</a>:</p> <div class=highlight><pre><span></span><code><span class=nt>deploykf_core</span><span class=p>:</span>
<span class=w>  </span><span class=nt>deploykf_istio_gateway</span><span class=p>:</span>

<span class=w>      </span><span class=c1>## this value is used to add arbitrary manifests to the generated output</span>
<span class=w>      </span><span class=c1>##</span>
<span class=w>      </span><span class=nt>extraManifests</span><span class=p>:</span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class="p p-Indicator">|</span>
<span class=w>          </span><span class=no>apiVersion: networking.k8s.io/v1</span>
<span class=w>          </span><span class=no>kind: Ingress</span>
<span class=w>          </span><span class=no>metadata:</span>
<span class=w>            </span><span class=no>name: deploykf-gateway</span>
<span class=w>            </span><span class=no>annotations:</span>
<span class=w>              </span><span class=no>kubernetes.io/ingress.class: &quot;gce-internal&quot;</span>
<span class=w>              </span><span class=no>kubernetes.io/ingress.allow-http: &quot;false&quot;</span>
<span class=w>          </span><span class=no>spec:</span>
<span class=w>            </span><span class=no>tls:</span>
<span class=w>              </span><span class=no>## NOTE: this secret is created as part of the deployKF installation</span>
<span class=w>              </span><span class=no>- secretName: &quot;deploykf-istio-gateway-cert&quot;</span>
<span class=w>            </span><span class=no>rules:</span>
<span class=w>              </span><span class=no>- host: &quot;deploykf.example.com&quot;</span>
<span class=w>                </span><span class=no>http:</span>
<span class=w>                  </span><span class=no>paths:</span>
<span class=w>                    </span><span class=no>- path: &quot;/*&quot;</span>
<span class=w>                      </span><span class=no>pathType: ImplementationSpecific</span>
<span class=w>                      </span><span class=no>backend:</span>
<span class=w>                        </span><span class=no>service:</span>
<span class=w>                          </span><span class=no>name: &quot;deploykf-gateway&quot;</span>
<span class=w>                          </span><span class=no>port:</span>
<span class=w>                            </span><span class=no>name: https</span>
<span class=w>              </span><span class=no>- host: &quot;*.deploykf.example.com&quot;</span>
<span class=w>                </span><span class=no>http:</span>
<span class=w>                  </span><span class=no>paths:</span>
<span class=w>                    </span><span class=no>- path: &quot;/*&quot;</span>
<span class=w>                      </span><span class=no>pathType: ImplementationSpecific</span>
<span class=w>                      </span><span class=no>backend:</span>
<span class=w>                        </span><span class=no>service:</span>
<span class=w>                          </span><span class=no>name: &quot;deploykf-gateway&quot;</span>
<span class=w>                          </span><span class=no>port:</span>
<span class=w>                            </span><span class=no>name: https</span>

<span class=w>      </span><span class=c1>## these values are used to configure the deployKF Gateway Service</span>
<span class=w>      </span><span class=c1>##</span>
<span class=w>      </span><span class=nt>gatewayService</span><span class=p>:</span>
<span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;deploykf-gateway&quot;</span>
<span class=w>        </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=s>&quot;NodePort&quot;</span>
<span class=w>        </span><span class=nt>annotations</span><span class=p>:</span>
<span class=w>          </span><span class=nt>cloud.google.com/app-protocols</span><span class=p>:</span><span class=w> </span><span class=s>&#39;{&quot;https&quot;:&quot;HTTPS&quot;,&quot;http&quot;:&quot;HTTP&quot;}&#39;</span>

<span class=w>          </span><span class=c1>## this annotation may be required if you are using a Shared VPC</span>
<span class=w>          </span><span class=c1>##  https://cloud.google.com/kubernetes-engine/docs/how-to/internal-load-balance-ingress#shared_vpc</span>
<span class=w>          </span><span class=c1>#cloud.google.com/neg: &#39;{&quot;ingress&quot;: true}&#39;</span>
</code></pre></div> </details> </details> <details class=warning> <summary>Ingress Considerations</summary> <p>In most cases, using a LoadBalancer Service is the preferred option for the following reasons:</p> <ol> <li><strong>Faster</strong>: less hops between the client and the gateway</li> <li><strong>Future-proof</strong>: deployKF might expose non-HTTP services in the future</li> <li><strong>Simpler TLS</strong>: many Ingress controllers don't support TLS passthrough</li> </ol> </details> <h2 id=2-configure-dns>2. Configure DNS<a class=headerlink href=#2-configure-dns title="Permanent link">&para;</a></h2> <p>Now that the deployKF Gateway Service has an IP address, you must configure DNS records which point to it.</p> <p>There are two main options to configure DNS records:</p> <ol> <li>Automatically with <a href=https://github.com/kubernetes-sigs/external-dns rel=noopener target=_blank>External-DNS</a> (recommended)</li> <li>Manually with your DNS provider</li> </ol> <p>Depending on which components of deployKF are used, the following hostnames may be served by the deployKF Gateway Service:</p> <table> <thead> <tr> <th>Hostname</th> <th>Description</th> <th>Required By</th> </tr> </thead> <tbody> <tr> <td><code>deploykf.example.com</code></td> <td>the deployKF Gateway</td> <td>ALL</td> </tr> <tr> <td><code>argo-server.deploykf.example.com</code></td> <td>the Argo Server UI</td> <td>Argo Server (Kubeflow Pipelines)</td> </tr> <tr> <td><code>minio-api.deploykf.example.com</code></td> <td>the MinIO API</td> <td>MinIO</td> </tr> <tr> <td><code>minio-console.deploykf.example.com</code></td> <td>the MinIO UI</td> <td>MinIO</td> </tr> </tbody> </table> <div class="admonition info"> <p class=admonition-title>Base Domain</p> <p>The "base domain" is defined by <a href=https://github.com/deployKF/deployKF/blob/v0.1.1/generator/default_values.yaml#L600 rel=noopener target=_blank><code>deploykf_core.deploykf_istio_gateway.gateway.hostname</code></a>, which has a default value of <code>"deploykf.example.com"</code>.</p> </div> <div class="admonition info"> <p class=admonition-title>Wildcard DNS Records</p> <p>If you plan to manually create the records, we recommend using a <a href=https://en.wikipedia.org/wiki/Wildcard_DNS_record rel=noopener target=_blank>wildcard DNS record</a> to account for any future subdomains that may be added to the deployKF Gateway Service.</p> <p>For example, you might set BOTH the following DNS records:</p> <ul> <li><code>*.deploykf.example.com</code></li> <li><code>deploykf.example.com</code></li> </ul> </div> <h3 id=configure-records-with-external-dns>Configure records with External-DNS<a class=headerlink href=#configure-records-with-external-dns title="Permanent link">&para;</a></h3> <details class=steps> <summary>Steps to configure records with External-DNS</summary> <p><a href=https://github.com/kubernetes-sigs/external-dns rel=noopener target=_blank>External-DNS</a> is a Kubernetes controller that automatically configures DNS records for Kubernetes resources.</p> <p>To use this option, you will generally need to do the following:</p> <ol> <li>Install External-DNS and connect it to your DNS provider</li> <li>Configure External-DNS to set DNS records for the deployKF Gateway Service</li> </ol> <hr> <p><strong>Step 1:</strong> Install External-DNS</p> <p>The External-DNS documentation provides instructions for <a href=https://kubernetes-sigs.github.io/external-dns/latest/#deploying-to-a-cluster rel=noopener target=_blank>installing External-DNS on various platforms</a>.</p> <p>Here are some popular platforms:</p> <table> <thead> <tr> <th>Cloud Platform</th> <th>DNS Provider</th> </tr> </thead> <tbody> <tr> <td>Amazon Web Services</td> <td><a href=https://kubernetes-sigs.github.io/external-dns/latest/tutorials/aws/ rel=noopener target=_blank>Route53</a></td> </tr> <tr> <td>Google Cloud</td> <td><a href=https://kubernetes-sigs.github.io/external-dns/latest/tutorials/gke/ rel=noopener target=_blank>Cloud DNS</a></td> </tr> <tr> <td>Microsoft Azure</td> <td><a href=https://kubernetes-sigs.github.io/external-dns/latest/tutorials/azure/ rel=noopener target=_blank>Azure DNS</a>, <a href=https://kubernetes-sigs.github.io/external-dns/latest/tutorials/azure-private-dns/ rel=noopener target=_blank>Azure Private DNS</a></td> </tr> <tr> <td>Any</td> <td><a href=https://kubernetes-sigs.github.io/external-dns/latest/tutorials/cloudflare/ rel=noopener target=_blank>Cloudflare</a>, <a href=https://kubernetes-sigs.github.io/external-dns/latest/tutorials/akamai-edgedns/ rel=noopener target=_blank>Akamai Edge DNS</a></td> </tr> </tbody> </table> <hr> <p><strong>Step 2:</strong> Configure External-DNS</p> <p>There are a few ways to configure External-DNS so that it sets DNS records for the deployKF Gateway Service.</p> <details class=config> <summary>Option 1: Automatically Extract Hostnames from Istio Gateway</summary> <p>You may configure External-DNS to automatically extract the domain names from Istio <code>Gateway</code> resources.</p> <p>If you do this, a separate DNS record is created for each <a href=https://github.com/deployKF/deployKF/blob/v0.1.1/generator/templates/manifests/deploykf-core/deploykf-istio-gateway/templates/gateway/Gateway.yaml#L14-L25 rel=noopener target=_blank>domain selected by our Istio <code>Gateway</code></a>.</p> <p>To <a href=https://kubernetes-sigs.github.io/external-dns/latest/tutorials/istio/ rel=noopener target=_blank>connect External-DNS with Istio</a>, you will need to:</p> <ol> <li>Update your <code>Deployment/external-dns</code> to set the <code>--source=istio-gateway</code> start argument</li> <li>Update your <code>ClusterRole/external-dns</code> to allow access to Istio <code>Gateway</code> and <code>VirtualService</code> resources</li> </ol> </details> <details class=config> <summary>Option 2: Manually Annotate Service or Ingress</summary> <p>You can manually configure External-DNS by annotating the <code>Service</code> or <code>Ingress</code> resource with the <a href=https://kubernetes-sigs.github.io/external-dns/latest/faq/#how-do-i-specify-a-dns-name-for-my-kubernetes-objects rel=noopener target=_blank><code>external-dns.alpha.kubernetes.io/hostname</code></a> annotation.</p> <p>If you do this, you need to add BOTH the <strong>base domain</strong> AND <strong>subdomains</strong>. You can avoid the need to specify each subdomain by using a wildcard DNS record, but you will still need to specify the base domain. Multiple hostnames can be specified in a single annotation using a comma-separated list.</p> <p>See the introduction of this section for a list of domains to configure.</p> <p>Depending on if you are using a Service or Ingress, you will set the <code>external-dns.alpha.kubernetes.io/hostname</code> annotation by:</p> <ul> <li><strong>Service</strong>: setting the <a href=https://github.com/deployKF/deployKF/blob/v0.1.1/generator/default_values.yaml#L654 rel=noopener target=_blank><code>deploykf_core.deploykf_istio_gateway.gatewayService.annotations</code></a> value</li> <li><strong>Ingress</strong>: manually annotating your Ingress resource</li> </ul> </details> </details> <h3 id=configure-records-manually>Configure records manually<a class=headerlink href=#configure-records-manually title="Permanent link">&para;</a></h3> <details class=steps> <summary>Steps to configure records manually</summary> <p>You can manually configure DNS records with your DNS provider that target your deployKF Gateway Service.</p> <p>To use this option, you will generally need to do the following:</p> <ol> <li>Ensure the deployKF Gateway has a static IP address (or hostname, in some cases)</li> <li>Configure DNS records with your DNS provider</li> </ol> <hr> <p><strong>Step 1:</strong> Static IP Addresses</p> <p>Each type of LoadBalancer Service (or Ingress controller) has different ways to configure static IP addresses or hostnames. Please refer to the documentation for your platform.</p> <hr> <p><strong>Step 2:</strong> Configure DNS Records</p> <p>You need to create records for BOTH the <strong>base domain</strong> AND <strong>subdomains</strong>. You can avoid the need to specify each subdomain by using a wildcard DNS record, but you will still need to specify the base domain.</p> <p>See the introduction of this section for a list of domains to configure.</p> </details> <h2 id=3-configure-httpstls>3. Configure HTTPS/TLS<a class=headerlink href=#3-configure-httpstls title="Permanent link">&para;</a></h2> <p>Now that the deployKF Gateway Service has a DNS pointing to it, to prevent self-signed certificate errors, you must configure a way to make the TLS certificates valid.</p> <ul> <li>If you are exposing the deployKF Gateway <a href=#expose-with-loadbalancer-service>with a LoadBalancer Service</a>, then ONLY the Istio Gateway will need to be configured with valid TLS certificates.</li> <li>If you are exposing the deployKF Gateway <a href=#expose-with-ingress>with an Ingress</a>, then BOTH the Istio Gateway and the Ingress will need to be configured with valid TLS certificates (unless your Ingress supports TLS passthrough, which most do not).</li> </ul> <h3 id=configure-tls-for-istio-gateway>Configure TLS for Istio Gateway<a class=headerlink href=#configure-tls-for-istio-gateway title="Permanent link">&para;</a></h3> <p>deployKF includes <a href=https://cert-manager.io/ rel=noopener target=_blank>cert-manager</a> to automatically generate TLS certificates for the Istio Gateway.</p> <p>By default, the Istio Gateway uses a self-signed certificate generated by <a href=https://github.com/deployKF/deployKF/blob/v0.1.1/generator/templates/manifests/deploykf-dependencies/cert-manager/templates/ClusterIssuer-kubeflow-gateway-issuer.yaml rel=noopener target=_blank>this <code>ClusterIssuer</code></a>, which is fine for testing (especially if you don't own the domain you are using), but not recommended for production usage.</p> <p>To have cert-manager generate valid TLS certificates for the Istio Gateway, you will need to:</p> <ol> <li>Connect cert-manager to your DNS provider</li> <li>Create a <code>ClusterIssuer</code> resource that can generate certificates for your domain</li> <li>Configure the Istio Gateway to use your <code>ClusterIssuer</code> to generate certificates</li> </ol> <div class="admonition info"> <p class=admonition-title>Custom Deployment</p> <p>deployKF includes an embedded version of cert-manager, if you wish to use your own, you may set the <a href=https://github.com/deployKF/deployKF/blob/v0.1.1/generator/default_values.yaml#L75 rel=noopener target=_blank><code>deploykf_dependencies.cert_manager.enabled</code></a> value to <code>false</code>. If you do this, the <a href=https://github.com/deployKF/deployKF/blob/v0.1.1/generator/default_values.yaml#L164-L171 rel=noopener target=_blank><code>deploykf_dependencies.cert_manager.clusterIssuer</code></a> values will still control which <code>ClusterIssuer</code> is used to generate certificates for the Istio Gateway.</p> </div> <h4 id=step-1-connect-cert-manager-to-dns-provider>STEP 1: Connect cert-manager to DNS Provider<a class=headerlink href=#step-1-connect-cert-manager-to-dns-provider title="Permanent link">&para;</a></h4> <p>For almost everyone, the best Certificate Authority (CA) is <a href=https://letsencrypt.org/ rel=noopener target=_blank>Let's Encrypt</a>.</p> <p>Because deployKF uses a <a href=https://github.com/deployKF/deployKF/blob/v0.1.1/generator/templates/manifests/deploykf-core/deploykf-istio-gateway/templates/gateway/Certificate.yaml#L16 rel=noopener target=_blank>wildcard <code>Certificate</code></a>, you MUST use the <a href=https://letsencrypt.org/docs/challenge-types/#dns-01-challenge rel=noopener target=_blank><code>DNS-01</code></a> challenge to verify domain ownership rather than <a href=https://letsencrypt.org/docs/challenge-types/#http-01-challenge rel=noopener target=_blank><code>HTTP-01</code></a>. This requires you to configure cert-manager so that it is able to create DNS records.</p> <p>The cert-manager documentation provides <a href=https://cert-manager.io/docs/configuration/acme/dns01/ rel=noopener target=_blank>instructions for configuring <code>DNS-01</code> challenges</a> for various DNS providers. The following table lists some popular DNS providers:</p> <table> <thead> <tr> <th>Cloud Platform</th> <th>DNS Provider</th> </tr> </thead> <tbody> <tr> <td>Amazon Web Services</td> <td><a href=https://cert-manager.io/docs/configuration/acme/dns01/route53/ rel=noopener target=_blank>Route53</a></td> </tr> <tr> <td>Google Cloud</td> <td><a href=https://cert-manager.io/docs/configuration/acme/dns01/google/ rel=noopener target=_blank>Cloud DNS</a></td> </tr> <tr> <td>Microsoft Azure</td> <td><a href=https://cert-manager.io/docs/configuration/acme/dns01/azuredns/ rel=noopener target=_blank>Azure DNS</a></td> </tr> <tr> <td>Any</td> <td><a href=https://cert-manager.io/docs/configuration/acme/dns01/cloudflare/ rel=noopener target=_blank>Cloudflare</a>, <a href=https://cert-manager.io/docs/configuration/acme/dns01/akamai/ rel=noopener target=_blank>Akamai Edge DNS</a></td> </tr> </tbody> </table> <div class="admonition info"> <p class=admonition-title>Pod ServiceAccount Annotations</p> <p>To use Pod-based authentication with your DNS Provider, you may need to annotate the cert-manager ServiceAccount. Custom ServiceAccount annotations can be applied with the <a href=https://github.com/deployKF/deployKF/blob/v0.1.1/generator/default_values.yaml#L155 rel=noopener target=_blank><code>deploykf_dependencies.cert_manager.controller.serviceAccount.annotations</code></a> value.</p> </div> <h4 id=step-2-create-a-clusterissuer>STEP 2: Create a ClusterIssuer<a class=headerlink href=#step-2-create-a-clusterissuer title="Permanent link">&para;</a></h4> <p>Once cert-manager is connected to your DNS provider, you must create a <code>ClusterIssuer</code> resource that can generate certificates for your domain from <a href=https://letsencrypt.org/ rel=noopener target=_blank>Let's Encrypt</a>.</p> <p>For example, you may create a <code>ClusterIssuer</code> resource like this when using Google Cloud DNS:</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cert-manager.io/v1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterIssuer</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster-issuer</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>acme</span><span class=p>:</span>
<span class=w>    </span><span class=nt>server</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://acme-staging-v02.api.letsencrypt.org/directory</span>
<span class=w>    </span><span class=nt>email</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">user@example.com</span>
<span class=w>    </span><span class=nt>privateKeySecretRef</span><span class=p>:</span>
<span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">letsencrypt-staging</span>
<span class=w>      </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tls.key</span>
<span class=w>    </span><span class=nt>solvers</span><span class=p>:</span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>dns01</span><span class=p>:</span>
<span class=w>          </span><span class=nt>cloudDNS</span><span class=p>:</span>
<span class=w>            </span><span class=nt>project</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-project-id</span>
<span class=w>            </span><span class=nt>serviceAccountSecretRef</span><span class=p>:</span>
<span class=w>              </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-service-account-secret</span>
<span class=w>              </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">service-account.json</span>
<span class=w>        </span><span class=nt>selector</span><span class=p>:</span>
<span class=w>          </span><span class=nt>dnsNames</span><span class=p>:</span>
<span class=w>            </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;*.deploykf.example.com&quot;</span>
<span class=w>            </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;deploykf.example.com&quot;</span>
</code></pre></div> <div class="admonition tip"> <p class=admonition-title>Issuer Kind</p> <p>Many cert-manager examples show an <code>Issuer</code> resource. Note that any issuer may be converted to its equivalent cluster version by changing the <code>kind</code> field from <code>"Issuer"</code> to <code>"ClusterIssuer"</code> and removing the <code>metadata.namespace</code> field.</p> </div> <h4 id=step-3-configure-the-istio-gateway>STEP 3: Configure the Istio Gateway<a class=headerlink href=#step-3-configure-the-istio-gateway title="Permanent link">&para;</a></h4> <p>Once you have a <code>ClusterIssuer</code> resource that can generate certificates for your domain, you must configure the deployKF Istio Gateway to use it.</p> <p>This is done by using the <a href=https://github.com/deployKF/deployKF/blob/v0.1.1/generator/default_values.yaml#L164-L171 rel=noopener target=_blank><code>deploykf_dependencies.cert_manager.clusterIssuer</code></a> values. For example, if you created a <code>ClusterIssuer</code> named <code>my-cluster-issuer</code>, you would set the following values:</p> <div class=highlight><pre><span></span><code><span class=nt>deploykf_dependencies</span><span class=p>:</span>
<span class=w>  </span><span class=nt>cert_manager</span><span class=p>:</span>
<span class=w>    </span><span class=nt>clusterIssuer</span><span class=p>:</span>
<span class=w>      </span><span class=c1>## this tells deployKF that you have created a ClusterIssuer</span>
<span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>

<span class=w>      </span><span class=c1>## this value should match the name of your ClusterIssuer</span>
<span class=w>      </span><span class=nt>issuerName</span><span class=p>:</span><span class=w> </span><span class=s>&quot;my-cluster-issuer&quot;</span>
</code></pre></div> <h3 id=configure-tls-for-ingress>Configure TLS for Ingress<a class=headerlink href=#configure-tls-for-ingress title="Permanent link">&para;</a></h3> <p>How you configure TLS for your Ingress will depend on which Ingress controller you are using. Please refer to the documentation for your platform.</p> <div class="admonition tip"> <p class=admonition-title>Share Certificate with Istio Gateway</p> <p>In some cases, your Ingress can use the same TLS certificate as the Istio Gateway. By default, a Kubernetes <code>Secret</code> named <code>deploykf-istio-gateway-cert</code> which contains the certificate is found in the <code>deploykf-istio-gateway</code> namespace, managed by <a href=https://github.com/deployKF/deployKF/blob/v0.1.1/generator/templates/manifests/deploykf-core/deploykf-istio-gateway/templates/gateway/Certificate.yaml rel=noopener target=_blank>this <code>Certificate</code></a> resource.</p> </div> <div class="admonition warning"> <p class=admonition-title>Both Istio Gateway and Ingress need valid TLS</p> <p>Pods which are in the <a href=https://istio.io/latest/about/service-mesh/ rel=noopener target=_blank>Istio mesh</a> use hairpinning (via <a href=https://github.com/deployKF/deployKF/blob/v0.1.1/generator/templates/manifests/deploykf-core/deploykf-istio-gateway/templates/gateway/ServiceEntry-gateway.yaml rel=noopener target=_blank>this Istio <code>ServiceEntry</code></a>) to access the gateway without leaving the cluster. This means that even if your Ingress has a valid TLS certificate, if you do not <a href=#configure-tls-for-istio-gateway>Configure TLS for the Istio Gateway</a>, you may see certificate errors when accessing services from within the cluster.</p> </div> <hr> <div class=md-source-file> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2023-08-22T21:26:57+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2023-08-22</span> <br> Created: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2023-08-16T23:03:01+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2023-08-16</span> </small> </div> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M5 9v12H1V9h4m4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21H9m0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03V19Z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 15V3h4v12h-4M15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3h9m0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97V5Z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> Thanks for your feedback! </div> <div data-md-value=0 hidden> Sorry to hear that. Please help us improve by <a href="https://github.com/deployKF/website/issues/new/?title=[Feedback]+Expose%20deployKF%20Gateway%20and%20configure%20HTTPS" target=_blank rel=noopener>raising an issue</a>. </div> </div> </div> </fieldset> </form> </article> </div> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Â© 2023 deployKF Authors | <a href=/privacy-policy/website/ >Privacy Policy</a> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/deployKF/deployKF target=_blank rel=noopener title="deployKF on GitHub" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://twitter.com/deployKF target=_blank rel=noopener title="deployKF on Twitter" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> <a href=https://www.youtube.com/@deployKF target=_blank rel=noopener title="deployKF on YouTube" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.copy", "navigation.indexes", "navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "search.highlight", "search.suggest"], "search": "../../../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.78eede0e.min.js></script> <script src=../../../js/timeago.min.js></script> <script src=../../../js/timeago_mkdocs_material.js></script> </body> </html>